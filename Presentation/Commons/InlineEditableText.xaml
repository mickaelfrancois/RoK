<UserControl
    x:Class="Rok.Commons.InlineEditableText"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="root">

    <Grid MinWidth="200" Height="40">
        <Grid x:Name="DisplayPanel" Background="Transparent"
                      VerticalAlignment="Center"
                      PointerEntered="DisplayPanel_PointerEntered"
                      PointerExited="DisplayPanel_PointerExited">       
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock x:Name="DisplayText"
                       Grid.Column="0"
                       Text="{x:Bind Text, Mode=OneWay}"
                       Style="{x:Bind TextStyle, Mode=OneWay}"
                       Visibility="{x:Bind IsEditing, Converter={StaticResource BoolToInvertVisibilityConverter}, Mode=OneWay}"
                       VerticalAlignment="Center"
                       Margin="0,0,4,0"/>

            <AppBarButton x:Name="EditButton"
                          Grid.Column="1"
                          Style="{StaticResource AppBarButtonCompactStyle}"                
                          Visibility="{x:Bind IsEditing, Converter={StaticResource BoolToInvertVisibilityConverter}, Mode=OneWay}"
                          Click="EditButton_Click"
                          VerticalAlignment="Center"                            
                          Icon="Edit"
                          Width="28"
                          MinWidth="0"
                          MinHeight="0"
                          Padding="0"
                          Margin="0">                 
            </AppBarButton>
        </Grid>

        <TextBox x:Name="EditBox"
            Text="{x:Bind Text, Mode=TwoWay}"
            Visibility="{x:Bind IsEditing, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}"
            LostFocus="EditBox_LostFocus"
            KeyDown="EditBox_KeyDown"
            VerticalAlignment="Center"/>
    </Grid>
</UserControl>